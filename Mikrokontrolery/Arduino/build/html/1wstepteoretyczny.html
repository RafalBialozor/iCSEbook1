

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Wstęp teoretyczny &mdash; Arduino 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/test.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Arduino 1.0.0 documentation" href="index.html" />
    <link rel="up" title="Obsługa wejść i wyjść – wejścia i wyjścia cyfrowe" href="1temat.html" />
    <link rel="next" title="Programy" href="1programy.html" />
    <link rel="prev" title="Obsługa wejść i wyjść – wejścia i wyjścia cyfrowe" href="1temat.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="1programy.html" title="Programy"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="1temat.html" title="Obsługa wejść i wyjść – wejścia i wyjścia cyfrowe"
             accesskey="P">previous</a> |</li>
        <li><a href="Arduino.html">Arduino 1.0.0 documentation</a> &raquo;</li>
          <li><a href="1temat.html" accesskey="U">Obsługa wejść i wyjść – wejścia i wyjścia cyfrowe</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="wstep-teoretyczny">
<h1>Wstęp teoretyczny<a class="headerlink" href="#wstep-teoretyczny" title="Permalink to this headline">¶</a></h1>
<div class="section" id="podstawowe-elementy-zestawu-arduino">
<h2>Podstawowe elementy zestawu Arduino<a class="headerlink" href="#podstawowe-elementy-zestawu-arduino" title="Permalink to this headline">¶</a></h2>
<p>Zestaw ma gniazdo USB, za pomocą którego odbywa się komunikacja komputera PC z mikrokontrolerem zestawu. Zestaw może być zasilany z interfejsu USB lub z wykorzystaniem zewnętrznego zasilania.</p>
<p>Dostępne są linie DIGITAL (cyfrowe) mikrokontrolera oznaczone od 0 do 13, przy czym linie 0 i 1 są liniami interfejsu RS232. Cyfrowe linie portów mikrokontrolerów mogą być skonfigurowane jako wejścia lub wyjścia.</p>
<p>Dostępna jest również linia AREF, do której można dołączyć zewnętrzne napięcie odniesienia dla przetwornika A/C mikrokontrolera.</p>
<p>Do gniazda ANALOG IN dołączone zostały linie analogowe mikrokontrolera, oznaczone od A0 do A5, które również mogą pracować jako linie cyfrowe. Analogowe linie portów mikrokontrolerów mogą być skonfigurowane jako wejścia lub wyjścia.</p>
<p>Część z wejść/wyjść może pełnić funkcje dostarczane przez oprogramowanie Arduino: komunikacja szeregowa (RS), protokół I2C, zewnętrzne przerwania.</p>
<p>Do gniazda Power doprowadzono linie masy, napięcia zasilające <span class="math">\(5 V\)</span> i <span class="math">\(3.3 V\)</span> oraz linię zerującą RESET. Dostępne jest również gniazdo ICSP, do którego można dołączyć zewnętrzny programator. Umożliwia on załadowania do pamięci mikrokontrolera programu Bootloadera lub zaprogramowania go dowolnym innym programem. Ponadto zestaw wyposażono w diodę sygnalizującą zasilanie, diody sygnalizujące transmisję z wykorzystaniem interfejsu RS232 oraz diodę „L” sygnalizującą stan linii 13 mikrokontrolera.</p>
</div>
<div class="section" id="obsluga-cyfrowych-linii">
<h2>Obsługa cyfrowych linii<a class="headerlink" href="#obsluga-cyfrowych-linii" title="Permalink to this headline">¶</a></h2>
<p>Obsługa linii cyfrowych mikrokontrolera w głównej mierze polega na konfiguracji ich, czy mają pracować jako wyjścia lub wejścia z rezystorem podwyższającym. W zestawie Arduino z mikrokontrolerem ATmega domyślnie linie portów są skonfigurowane jako wejścia z wyłączonym rezystorem podwyższającym. Czyli domyślnie są to wejścia, prawie nie pobierające prądu i bardzo często są wykorzystywane do odczytu sygnałów z czujników.</p>
<p>W mikrokontrolerach ATmega jest możliwość programowego włączenia rezystora podwyższającego, który domyślnie na linii wejściowej będzie ustalał stan wysoki. Rozwiązanie z rezystorem podwyższającym jest bardzo często wykorzystywane podczas odczytu stanu z przycisków. Jego naciśnięcie, na linii wejściowej ustawi stan niski, a domyślnie po jego puszczeniu będzie panował stan wysoki wymuszany przez rezystor podwyższający.</p>
<p>Cyfrowe linie mogą również być wyjściami, na których stan może się zmieniać na niski lub wysoki, co odpowiada napięciu <span class="math">\(0 V\)</span> i <span class="math">\(5 V\)</span>. Wydajność prądowa wyjść mikrokontrolerów Atmega umożliwia zasilanie dołączonych do nich diod LED. W przypadku większych obciążeń wymagane są dodatkowe wzmacniacze, chociażby w postaci tranzystorów.</p>
<p>Do obsługi cyfrowych linii w Arduino dostępne są trzy funkcje <tt class="docutils literal"><span class="pre">pinMode()</span></tt>, <tt class="docutils literal"><span class="pre">digitalWrite()</span></tt> i <tt class="docutils literal"><span class="pre">digitalRead()</span></tt>.</p>
<ul class="simple">
<li>Za pomocą funkcji <tt class="docutils literal"><span class="pre">pinMode(&lt;pin&gt;,</span> <span class="pre">&lt;mode&gt;)</span></tt> mamy możliwość skonfigurowania typu linii cyfrowej – ma być wejściem czy wyjściem. Pierwszy parametr określa numer pinu mikrokontrolera zgodnie z opisem linii na płytce zestawu Arduino Uno. Drugi parametr, <tt class="docutils literal"><span class="pre">mode</span></tt>, może posiadać stałe parametry <tt class="docutils literal"><span class="pre">INPUT</span></tt> lub <tt class="docutils literal"><span class="pre">OUTPUT</span></tt>, co wskazuje, czy linia ma być wejściem, czy wyjściem.</li>
<li>Funkcja <tt class="docutils literal"><span class="pre">digitalWrite(&lt;pin&gt;,</span> <span class="pre">&lt;value&gt;)</span></tt> służy do ustawiania stanu linii mikrokontrolera. Pierwszy parametr pin określa numer pinu, natomiast drugi parametr określa, jaki ma być jej stan (niski czy wysoki – stałe parametry <tt class="docutils literal"><span class="pre">LOW</span></tt> lub <tt class="docutils literal"><span class="pre">HIGH</span></tt>). Instrukcja <tt class="docutils literal"><span class="pre">digitalWrite()</span></tt> umożliwia również załączenie rezystora podwyższającego na linii będącej wejściem. Aby do linii wejściowej dołączyć wewnętrzny rezystor podwyższający należy z wykorzystaniem funkcji <tt class="docutils literal"><span class="pre">digitalWrite()</span></tt> wpisać do linii wejściowej wartość <tt class="docutils literal"><span class="pre">HIGH</span></tt>.</li>
<li>Instrukcja <tt class="docutils literal"><span class="pre">digitalRead(&lt;pin&gt;)</span></tt> służy do odczytu stanu linii będącej wejściem. Parametr pin określa numer pinu mikrokontrolera który jest odczytywany. Funkcja zwraca stan odczytywanego stanu pinu zgodnie z przykładem: <tt class="docutils literal"><span class="pre">val</span> <span class="pre">=</span> <span class="pre">digitalRead(12);</span></tt>. Do zmiennej val zostanie zapisany stan 12 linii portu mikrokontrolera.</li>
</ul>
<p>Liczba dostępnych portów będzie zależeć od zastosowanego mikrokontrolera, choć istnieje również możliwość ich zwiększenia poprzez dołączenie do niego odpowiednich ekspanderów. Na płytce Arduino Uno dostępne są cyfrowe linie portów oznaczone numerami od 0 do 13. Dlatego też dla ułatwienia właśnie tymi aliasami można się posługiwać podczas konfigurowania portów I/O.</p>
</div>
<div class="section" id="funkcje-specjalne-pinow">
<h2>Funkcje specjalne pinów<a class="headerlink" href="#funkcje-specjalne-pinow" title="Permalink to this headline">¶</a></h2>
<div class="section" id="informacje-wstepne">
<h3>Informacje wstępne<a class="headerlink" href="#informacje-wstepne" title="Permalink to this headline">¶</a></h3>
<p>Wyprowadzenia Arduino, oprócz standardowej roli wejść/wyjść cyfrowych, posiadają także pewne funkcje specjalne. Są to między innymi: wyprowadzenia sprzętowych interfejsów komunikacyjnych, wyjścia analogowe czy wyjścia timerów (liczników). Dla każdego z nich Arduino posiada bibliotekę, która sprawia, że korzystanie z nich staje się niezwykle proste.</p>
<ul class="simple">
<li>Serial: 0 (RX) i 1 (TX). Używane do odbioru (RX) i nadawania (TX) TTL [Transistor-transistor logic – klasa cyfrowych układów scalonych] danych seryjnych. Te piny są podłączone do odpowiednich styków na ATmega8U2 USB-to-TTL Serial chip.</li>
<li>External Interrupts: 2 i 3. Te piny mogą być skonfigurowane do wyzwalania przerwania o niskiej wartości, wzrastania i opadania wykresu sygnału cyfrowego, lub zmiany wartości (szczegóły: funkcja <tt class="docutils literal"><span class="pre">attachInterrupt()</span></tt>).</li>
<li>PWM: 3, 5, 6, 9, 10 i 11. Zapewniają 8-bitowe wyjście PWM z funkcją <tt class="docutils literal"><span class="pre">analogWrite</span> <span class="pre">()</span></tt>.</li>
<li>SPI: 10 (S), 11 (MOSI), 12 (MISO), 13 (SCK). Te piny obsługują komunikację SPI przy użyciu biblioteki SPI.</li>
<li>LED: 13. Gdy pin ma wysoką wartość, dioda LED jest włączona, gdy pin jest niski, to jest wyłączona.</li>
<li>TWI - I2C - Kolejny popularny, szeregowy, synchroniczny interfejs komunikacyjny. Wymaga dwóch linii komunikacyjnych: danych oraz zegarową (CLK). Za pomocą I2C użytkownik może obsługiwać np. czujniki MEMS (MinIMU-9).</li>
</ul>
</div>
<div class="section" id="interfejs-szeregowy-uart">
<h3>Interfejs szeregowy &nbsp;(UART)<a class="headerlink" href="#interfejs-szeregowy-uart" title="Permalink to this headline">¶</a></h3>
<p>Do transmisji używane są dwie linie: RX (pin 0) – odbiornik (pin 1) oraz TX - nadajnik. Interfejs jest bardzo prosty w konfiguracji, pozwala na wymianę danych z komputerem bądź obsługę urządzeń cyfrowych np. modułu Bluetooth lub&nbsp;sterownika serwomechanizmów. Czasem oznaczany jest jako USART. Literka <em>S</em> oznacza, że dane wysyłane są w sposób synchroniczny, czyli do transmisji&nbsp;oprócz TX RX,﻿ potrzebna jest&nbsp;jeszcze jedna linia - linia zegarowa (CLK).</p>
</div>
<div class="section" id="przerwania-zewnetrzne">
<h3>Przerwania zewnętrzne<a class="headerlink" href="#przerwania-zewnetrzne" title="Permalink to this headline">¶</a></h3>
<p>Mikrokontroler umożliwia wykonywanie procedur obsługi prze­rwań, czyli podprogramów, których wykonanie musi odbyć się na­tychmiast po zaistnieniu określonego zdarzenia. Wtedy wykonywanie programu głównego jest przerywane na czas realizacji podprogramu obsługi przerwania.</p>
<p>Przerwania zewnętrzne umożliwiają natychmiastową obsługę zdarzeń zewnętrznych, sygnalizowanych sygnałem logicznym. Zdarzenia mogą być wyzwalane za pomocą zbocza opadającego, narastającego lub jakiejkolwiek zmiany logicznej. Gdy zdarzenie wystąpi procesor natychmiast przerwie wszystkie dotychczasowe operacje i zacznie wykonywać fragment kodu związany z obsługą przerwania.﻿</p>
<p>Do obsługi przerwania zewnętrz­nego wykorzystywane są funkcje włączające przerwanie <tt class="docutils literal"><span class="pre">attachInter­rupt(&lt;interrupt&gt;,</span> <span class="pre">&lt;function&gt;,</span> <span class="pre">&lt;mode&gt;)</span></tt> oraz wyłączające przerwanie <tt class="docutils literal"><span class="pre">detachIn­terrupt(interrupt)</span></tt>. Parametr <tt class="docutils literal"><span class="pre">&lt;interrupt&gt;</span></tt> jest numerem portu, od którego jest zgłaszane przerwanie.</p>
<p>Parametr <tt class="docutils literal"><span class="pre">&lt;function&gt;</span></tt> to nazwa funkcji, która będzie wykonywana po zaistnieniu przerwania, a mode określa mo­ment zgłoszenia przerwania. Parametr <tt class="docutils literal"><span class="pre">&lt;mode&gt;</span></tt> ma następujące wartości:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">LOW</span></tt> – wywoływane, gdy pin posiada stan niski,</li>
<li><tt class="docutils literal"><span class="pre">CHANGE</span></tt> – wywoływane, gdy pin zmieni stan,</li>
<li><tt class="docutils literal"><span class="pre">RISING</span></tt> – wywoływane przy narastającym zboczu sygnału,</li>
<li><tt class="docutils literal"><span class="pre">FALLING</span></tt> – wywoływane przy opadającym zboczu sygnału.</li>
</ul>
</div>
<div class="section" id="obsluga-generatora-pwm">
<h3>Obsługa generatora PWM<a class="headerlink" href="#obsluga-generatora-pwm" title="Permalink to this headline">¶</a></h3>
<p>6 z 14 pinów Arduino Uno (3, 5, 6, 9, 10 i 11), służących jako wyjście lub wejścia, może działać w trybie PWM output, czyli można sterować mocą przekazywaną (doskonale nadaje się do sterowania jasnością świecenia diody).</p>
<p>Sygnał PWM (Pulse-width modulation, czyli modulacja szerokości impulsu) jest to sygnał prostokątny o modyfikowanym wypełnieniu. Z wykorzystaniem sygnału PWM i jego późniejszym uśrednieniu z wykorzystaniem prostego filtra, składającego się z rezystora i kondensatora można uzyskać prosty przetwornik cyfrowo-analogowy, na wyjściu którego wartość analogowa (napięcie) będzie zależna od wypełnienia generowanego sygnału PWM. Częstotliwość sygnału PWM w Arduino to około <span class="math">\(500 Hz\)</span>.</p>
<p>Do generowania sygnału PWM dostępna jest funkcja <tt class="docutils literal"><span class="pre">analogWrite(&lt;pin&gt;,</span> <span class="pre">&lt;value&gt;)</span></tt>, gdzie pierwszym parametrem jest numer linii cyfrowej PWM, a <tt class="docutils literal"><span class="pre">&lt;value&gt;</span></tt> wartością wypełnienia generowanego sygnału PWM w zakresie od 0 do 255.</p>
<ul class="simple">
<li>Wartość 255 daje stałe napięcie <span class="math">\(5 V\)</span>.</li>
<li>Wartość 127 daje wypełnienie 50%, czyli napięcie wyjściowe po uśrednieniu <span class="math">\(2.5 V\)</span>.</li>
<li>Natomiast wartość 0 daje wypełnienie 0% i napięcie <span class="math">\(0 V\)</span>.</li>
</ul>
<p>Z wykorzystaniem sygnału PWM można modyfikować np. jasność dołączonej diody LED czy prędkości silnika. Sygnał PWM dla mikrokontrolera ATmega168, który zamontowany jest w Arduino Uno może być generowany na pinach 3, 5, 6, 9, 10 i 11. Na przykład funkcja:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="n">analogWrite</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">127</span><span class="p">);</span>
<span class="c1">//Sygnał PWM o wypełnieniu 127 generuje sygnał PWM na pinie 5 o wypełnieniu 50%.</span>
</pre></div>
</div>
<p>Nie trzeba również ustawiać linii PWM jako wyjścia przez wywołaniem funkcji <tt class="docutils literal"><span class="pre">analogWrite()</span></tt>, ale dla czytelności programu zalecane jest ustawienie linii PWM jako wyjście z wykorzystaniem funkcji <tt class="docutils literal"><span class="pre">pinMode()</span></tt>.</p>
<div class="figure align-center">
<img alt="_images/pwm.gif" src="_images/pwm.gif" style="width: 450px;" />
</div>
</div>
<div class="section" id="interfejs-spi">
<h3>Interfejs SPI<a class="headerlink" href="#interfejs-spi" title="Permalink to this headline">¶</a></h3>
<p>Magistrala szeregowa działająca w sposób synchroniczny﻿. Do komunikacji używane są trzy wyprowadzenia: MOSI(11), MISO (12), SCK(13). Charakteryzuje się wysoką prędkością transmisji, dlatego też jest używana do obsługi szybkich urządzeń (np. pamięci EEPROM, przetworników A/C, C/A). Wykorzystywana jest także do komunikacji z niektórymi wyświetlaczami i czujnikami.</p>
</div>
<div class="section" id="pin-13">
<h3>Pin 13<a class="headerlink" href="#pin-13" title="Permalink to this headline">¶</a></h3>
<p>Pin 13 jako jedyny posiada rezystor wbudowany w&nbsp;płytkę Arduino, czego konsekwencją jest zmniejszenie napięcia do <span class="math">\(1.7 V\)</span>. Dlatego można do&nbsp;niego podłączyć diodę bezpośrednio i&nbsp;nie ulegnie ona przepaleniu.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="Arduino.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Wstęp teoretyczny</a><ul>
<li><a class="reference internal" href="#podstawowe-elementy-zestawu-arduino">Podstawowe elementy zestawu Arduino</a></li>
<li><a class="reference internal" href="#obsluga-cyfrowych-linii">Obsługa cyfrowych linii</a></li>
<li><a class="reference internal" href="#funkcje-specjalne-pinow">Funkcje specjalne pinów</a><ul>
<li><a class="reference internal" href="#informacje-wstepne">Informacje wstępne</a></li>
<li><a class="reference internal" href="#interfejs-szeregowy-uart">Interfejs szeregowy &nbsp;(UART)</a></li>
<li><a class="reference internal" href="#przerwania-zewnetrzne">Przerwania zewnętrzne</a></li>
<li><a class="reference internal" href="#obsluga-generatora-pwm">Obsługa generatora PWM</a></li>
<li><a class="reference internal" href="#interfejs-spi">Interfejs SPI</a></li>
<li><a class="reference internal" href="#pin-13">Pin 13</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="1temat.html"
                        title="previous chapter">Obsługa wejść i wyjść – wejścia i wyjścia cyfrowe</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="1programy.html"
                        title="next chapter">Programy</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/1wstepteoretyczny.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="1programy.html" title="Programy"
             >next</a> |</li>
        <li class="right" >
          <a href="1temat.html" title="Obsługa wejść i wyjść – wejścia i wyjścia cyfrowe"
             >previous</a> |</li>
        <li><a href="Arduino.html">Arduino 1.0.0 documentation</a> &raquo;</li>
          <li><a href="1temat.html" >Obsługa wejść i wyjść – wejścia i wyjścia cyfrowe</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Sara Mroz.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>